<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flappy Bird - Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #70c5ce 0%, #4a9eff 100%);
            color: white;
            padding: 20px;
            text-align: center;
        }
        .test-container {
            max-width: 600px;
            margin: 0 auto;
            background: rgba(0,0,0,0.3);
            padding: 20px;
            border-radius: 15px;
        }
        button {
            background: #FFD700;
            color: #333;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            margin: 10px;
        }
        #output {
            background: rgba(0,0,0,0.5);
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            text-align: left;
            font-family: monospace;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üê¶ Flappy Bird - –¢–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏</h1>
        
        <button onclick="testScripts()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É —Å–∫—Ä–∏–ø—Ç–æ–≤</button>
        <button onclick="clearOutput()">–û—á–∏—Å—Ç–∏—Ç—å</button>
        <button onclick="window.location.href='/'">–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –∏–≥—Ä–µ</button>
        
        <div id="output">–ù–∞–∂–º–∏—Ç–µ "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É —Å–∫—Ä–∏–ø—Ç–æ–≤" –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏...</div>
    </div>

    <script>
        function log(message) {
            const output = document.getElementById('output');
            const timestamp = new Date().toLocaleTimeString();
            output.textContent += `[${timestamp}] ${message}\n`;
        }

        function clearOutput() {
            document.getElementById('output').textContent = '';
        }

        async function testScripts() {
            clearOutput();
            log('üîç –ù–∞—á–∏–Ω–∞–µ–º –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É...');
            
            // –°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
            const scripts = [
                'js/ui.js',
                'js/bird.js', 
                'js/pipes.js',
                'js/powerups.js',
                'js/achievements.js',
                'js/game.js',
                'js/main.js'
            ];
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ñ–∞–π–ª–æ–≤
            for (const script of scripts) {
                try {
                    const response = await fetch(`/${script}`);
                    if (response.ok) {
                        log(`‚úÖ ${script} - OK`);
                    } else {
                        log(`‚ùå ${script} - –û—à–∏–±–∫–∞ ${response.status}`);
                    }
                } catch (error) {
                    log(`‚ùå ${script} - ${error.message}`);
                }
            }
            
            log('');
            log('üß™ –ü—Ä–æ–±—É–µ–º –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–∫—Ä–∏–ø—Ç—ã...');
            
            // –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
            const testContainer = document.createElement('div');
            testContainer.style.display = 'none';
            document.body.appendChild(testContainer);
            
            // –î–æ–±–∞–≤–ª—è–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é HTML —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
            testContainer.innerHTML = `
                <div id="mainMenu" class="screen">
                    <button id="playBtn">–ò–≥—Ä–∞—Ç—å</button>
                    <span id="highScore">0</span>
                </div>
                <div id="gameHUD" class="screen hidden">
                    <span id="currentScore">0</span>
                    <div id="powerUpIcon"></div>
                    <div id="powerUpTimer"></div>
                </div>
                <div id="gameOverScreen" class="screen hidden">
                    <span id="finalScore">0</span>
                    <span id="bestScore">0</span>
                    <div id="achievementsEarned"></div>
                    <button id="restartBtn">–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞</button>
                    <button id="menuBtn">–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é</button>
                </div>
                <div id="settingsScreen" class="screen hidden">
                    <input type="checkbox" id="soundToggle">
                    <select id="difficultySelect">
                        <option value="normal">–û–±—ã—á–Ω–∞—è</option>
                    </select>
                    <input type="checkbox" id="powerUpsToggle">
                    <button id="backToMenuBtn">–ù–∞–∑–∞–¥</button>
                </div>
                <div id="achievementsScreen" class="screen hidden">
                    <div id="achievementsList"></div>
                    <button id="achievementsBackBtn">–ù–∞–∑–∞–¥</button>
                </div>
                <canvas id="gameCanvas" width="480" height="640"></canvas>
            `;
            
            let loadedScripts = 0;
            const totalScripts = scripts.length;
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–∫—Ä–∏–ø—Ç—ã –ø–æ –ø–æ—Ä—è–¥–∫—É
            for (const script of scripts) {
                try {
                    await loadScript(script);
                    loadedScripts++;
                    log(`üìú –ó–∞–≥—Ä—É–∂–µ–Ω ${script} (${loadedScripts}/${totalScripts})`);
                } catch (error) {
                    log(`‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ ${script}: ${error.message}`);
                }
            }
            
            log('');
            log('üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã...');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∫–ª–∞—Å—Å–æ–≤ –∏ –æ–±—ä–µ–∫—Ç–æ–≤
            const checks = [
                { name: 'window.UI', obj: window.UI },
                { name: 'Bird class', obj: window.Bird },
                { name: 'Game class', obj: window.Game },
                { name: 'Pipe class', obj: window.Pipe },
                { name: 'PowerUp class', obj: window.PowerUp },
                { name: 'Achievement class', obj: window.Achievement }
            ];
            
            checks.forEach(check => {
                if (check.obj) {
                    log(`‚úÖ ${check.name} - –Ω–∞–π–¥–µ–Ω`);
                } else {
                    log(`‚ùå ${check.name} - –Ω–µ –Ω–∞–π–¥–µ–Ω`);
                }
            });
            
            // –ü—Ä–æ–±—É–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–≥—Ä—É
            log('');
            log('üéÆ –ü—Ä–æ–±—É–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–≥—Ä—É...');
            
            try {
                if (window.Game) {
                    const testGame = new window.Game();
                    log('‚úÖ –ò–≥—Ä–∞ —Å–æ–∑–¥–∞–Ω–∞ —É—Å–ø–µ—à–Ω–æ');
                    
                    if (window.UI && window.UI.setGame) {
                        window.UI.setGame(testGame);
                        log('‚úÖ UI –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ –∏–≥—Ä–µ');
                    } else {
                        log('‚ùå UI –Ω–µ –Ω–∞–π–¥–µ–Ω –∏–ª–∏ –º–µ—Ç–æ–¥ setGame –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω');
                    }
                } else {
                    log('‚ùå –ö–ª–∞—Å—Å Game –Ω–µ –Ω–∞–π–¥–µ–Ω');
                }
            } catch (error) {
                log(`‚ùå –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏: ${error.message}`);
                log(`–°—Ç–µ–∫ –æ—à–∏–±–∫–∏: ${error.stack}`);
            }
            
            log('');
            log('üèÅ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞');
        }
        
        function loadScript(src) {
            return new Promise((resolve, reject) => {
                const script = document.createElement('script');
                script.src = src;
                script.onload = resolve;
                script.onerror = () => reject(new Error(`–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å ${src}`));
                document.head.appendChild(script);
            });
        }
    </script>
</body>
</html>
